<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Ajingu Gallery</title>
        <meta name="description" content="Ajingu's Portfolio">
        <script src="https://aframe.io/releases/0.5.0/aframe.min.js"></script>
        <script src="https://npmcdn.com/aframe-animation-component@3.0.1"></script>
        <script src="https://npmcdn.com/aframe-event-set-component@3.0.1"></script>
        <script src="https://npmcdn.com/aframe-layout-component@3.0.1"></script>
        <script src="https://npmcdn.com/aframe-template-component@3.1.1"></script>
        <script src="https://unpkg.com/aframe-text-geometry-component@^0.5.0/dist/aframe-text-geometry-component.min.js"></script> 
        <script src="https://rawgit.com/rdub80/aframe-gui/master/dist/aframe-gui.min.js"></script>
        <script src="set-text-anim.js"></script>

    </head>
    <body>
        <a-scene>
            <a-assets>
                <!--image-->
                <img id="map3d" crossorigin="anonymous" src="https://cdn.rawgit.com/ajingu/Portfolio/master/Images/3dmap.png">
                <img id="realsense" crossorigin="anonymous" src="https://cdn.rawgit.com/ajingu/Portfolio/master/Images/realsense.png">

                <!--texture-->
                <img id="sky-img" crossorigin="anonymous" src="https://cdn.rawgit.com/ajingu/Portfolio/master/Textures/sky_lightblue-min.jpg">
                <img id="wood-floor-img" crossorigin="anonymous" src="https://cdn.rawgit.com/ajingu/Portfolio/master/Textures/wood-floor-min.jpg">
                <img id="wood-wall-img" crossorigin="anonymous" src="https://cdn.rawgit.com/ajingu/Portfolio/master/Textures/wood-wall-min.jpg">
                
                <!--font-->
                <a-asset-item id="indieFlower" crossorigin="anonymous" src="https://cdn.rawgit.com/ajingu/Portfolio/master/Fonts/IndieFlower.json"></a-asset-item>   
                
                <!--house components-->
                <script id="base-wall" type="text/html">
                    <a-plane material="color: #FFF;" position="0 0 0" width="${width}" height="${height}">
                        <a-plane material="src: #wood-wall-img; repeat: 5 1" position="0 ${-height/2 + 0.08} 0.005" width="${width}" height="0.16"></a-plane>
                    </a-plane>
                </script>

                <script id="inner-wall" type="text/html">                
                    <a-entity template="src: #base-wall" position="${width/3} ${height/2} 0.5" data-width="${width/3}" data-height="${height}" ></a-entity>
                    <a-entity template="src: #base-wall" position="${width/3} ${height/2} -0.5" rotation="0 180 0" data-width="${width/3}" data-height="${height}" ></a-entity>
                    <a-entity template="src: #base-wall" position="${width/6} ${height/2} 0" rotation="0 -90 0" data-width="1" data-height="${height}" ></a-entity>

                    <a-entity template="src: #base-wall" position="${-width/3} ${height/2} 0.5" data-width="${width/3}" data-height="${height}" ></a-entity>
                    <a-entity template="src: #base-wall" position="${-width/3} ${height/2} -0.5" rotation="0 180 0" data-width="${width/3}" data-height="${height}" ></a-entity>
                    <a-entity template="src: #base-wall" position="${-width/6} ${height/2} 0" rotation="0 90 0" data-width="1" data-height="${height}" ></a-entity>
                </script>

                <script id="ductrail" type="text/html">
                    <a-cylinder position="0 ${-above/2} ${-length*0.3}" radius="0.04" height="${above}" material="color: #000"></a-cylinder>
                    <a-cylinder position="0 ${-above/2} ${length*0.3}" radius="0.04" height="${above}" material="color: #000"></a-cylinder>
                    <a-box position="0 ${-above} 0" width="0.2" height="0.05" depth="${length * 0.8}" material="color: #000">
                        <a-entity template="src: #spotlight" position="0 -0.2 ${length * 0.22}"></a-entity>
                        <a-entity template="src: #spotlight" position="0 -0.2 ${-length * 0.22}"></a-entity>
                    </a-box>
                </script>

                <script id="spotlight" type="text/html">
                    <a-box material="color: #E5DEC0" width="0.05" height="0.2" depth="0.05">
                        <a-cylinder material="color: #E5DEC0" position="0 -0.2 0" rotation="0 0 30" radius="0.1" height="0.3">
                            <a-light type="spot" angle="35" distance="5.0" intensity="2.0" decay="2" color="#EAE9D0" position="0 -0.1 0" rotation="-90 0 0"></a-light>
                        </a-cylinder>
                    </a-box>
                </script>
                

                <!--house-->
                <script id="houseTemplate" type="text/html">
                    <!--floor-->
                    <a-plane position="0 0 0" rotation="-90 0 0" width=${xlen} height=${zlen}  material="src: #wood-floor-img; repeat:${xlen} ${zlen}"></a-plane>
                
                    <!--outer wall-->
                    <a-entity template="src: #base-wall" data-width=${xlen} data-height=${ylen} position="0 ${ylen/2} ${-zlen/2}"></a-entity>
                    <a-entity template="src: #base-wall" data-width=${xlen} data-height=${ylen} position="0 ${ylen/2} ${zlen/2}"rotation="0 180 0"></a-entity>
                    <a-entity template="src: #base-wall" data-width=${zlen} data-height=${ylen} position="${-xlen/2} ${ylen/2} 0" rotation="0 90 0"></a-entity>
                    <a-entity template="src: #base-wall" data-width=${zlen} data-height=${ylen} position="${xlen/2} ${ylen/2} 0" rotation="0 -90 0"></a-entity>
                    
                    
                    <!--inner wall-->
                    <a-entity template="src: #inner-wall" position="0 0 0" data-width=${xlen} data-height=${ylen}></a-entity>

                    <!--duct rail-->
                    <a-entity template="src: #ductrail" position="${xlen * 2 / 5} ${ylen} ${zlen*0.26}" data-above=${ylen/16} data-length=${zlen/2}></a-entity>
                    <a-entity template="src: #ductrail" position="${-xlen * 2 / 5} ${ylen} ${zlen*0.26}" data-above=${ylen/16} data-length=${zlen/2} rotation="0 180 0"></a-entity>
                    <a-entity template="src: #ductrail" position="${xlen * 2 / 5} ${ylen} ${-zlen*0.26}" data-above=${ylen/16} data-length=${zlen/2}></a-entity>
                    <a-entity template="src: #ductrail" position="${-xlen/3} ${ylen} ${-zlen*0.26}" data-above=${ylen/16} data-length=${zlen/2} rotation="0 180 0"></a-entity>

                    
                    <!--ceil-->
                    <a-box id="ceil" position="0 ${ylen} 0" width="${xlen}" height="0.1" depth="${zlen}"></a-box>
                </script>

                <!--text-->
                <script id="textTemplate" type="text/html">
                    <a-text class="textAnim"
                        position="0 ${ypos} 0"
                        width="5" height="2"
                        opacity="0.0"
                        value="${value}"
                        font="kelsonsans"
                        color="#48444C"
                        align="${align}"
                        animation__positionOpen="property: position; startEvents: textOpen; dur: 600; to: ${xpos} ${ypos} 0"
                        animation__opacityOpen="property: opacity; startEvents: textOpen; dur: 600; to: 1.0"
                        animation__positionClose="property: position; startEvents: textClose; dur: 600; from: ${xpos} ${ypos} 0; to: 0 ${ypos} 0"
                        animation__opacityClose="property: opacity; startEvents: textClose; dur: 600; from: 1.0; to: 0.0">
                    </a-text>
                </script>

                <!--panel-->
                <script id="panelTemplate" type="text/html">
                    <a-gui-flex-container set-text-anim
                        position="0 0 0.01"
                        width="${width}" height="${height}"
                        color="#FFF" transparent="true" opacity="0.0">

                        <a-entity
                            position="${-titlelen/6} ${height * 0.7} 0.01" 
                            material="color: ${titlecolor}; metalness: 0.5; roughness: 0.5"
                            text-geometry="value: ${title}; size: 0.5; font: #indieFlower; bevelEnabled: true; bevelSize: 0.0001; bevelThickness: 0.01">
                        </a-entity>

                        <a-image rayTarget
                            position="0 0 0.01"
                            width="${width}" height="${height}" 
                            src=${thumb}>
                        </a-image>

                        <a-entity template="src: #textTemplate" data-value="${date}" data-xpos="${-width/2-0.05}" data-ypos="${height*0.35}" data-align="right"></a-entity>
                        <a-entity template="src: #textTemplate" data-value="${use}" data-xpos="${width/2+0.05}" data-ypos="${height*0.15}" data-align="left"></a-entity>
                        <a-entity template="src: #textTemplate" data-value="${desc}" data-xpos="0" data-ypos="${-height * 3 / 4}" data-align="center"></a-entity>
                    </a-gui-flex-container>
                </script>
            </a-assets>


            <!--sky-->
            <!--<a-sky id="sky" position="0 55 0" radius="60" src="#sky-img"></a-sky>-->

            <!--house-->
            <a-entity id="house" template="src: #houseTemplate" data-xlen="10" data-ylen="6" data-zlen="20"></a-entity>
            
            <!--panels-->
            <a-entity>
                <a-entity template="src: #panelTemplate" 
                    data-title="3DMap" data-titlelen="5" data-titlecolor="#FF0000" 
                    data-thumb="#map3d" data-width="2" data-height="1.5" 
                    data-date="Dec. 2017" data-use="Unity&#13;&#10;ARKit&#13;&#10;Mapbox&#13;&#10;GoogleMaps" data-desc="3-dimensional AR map"
                    position="-5 1.8 7.5" rotation="0 90 0">
                </a-entity>
                <a-entity template="src: #panelTemplate" 
                    data-title="RealSense" data-titlelen="9" data-titlecolor="#00FF00"
                    data-thumb="#realsense" data-width="2" data-height="1.5" 
                    data-date="Mar. 2018" data-use="Unity&#13;&#10;HTC Vive&#13;&#10;OpenCV" data-desc="PointCloud Viewer of RealSense"
                    position="-5 1.8 3" rotation="0 90 0">
                </a-entity>
            </a-entity>
            
            <!--ambient light-->
            <a-light type="ambient" color="#60605E"></a-light>

            <!--cursor-->
            <a-camera look-controls wasd-controls position="0 0 5" rotation="0 90 0">
                <a-cursor id="cursor"
                    event-set__1="_event: mouseenter; color: springgreen"
                    event-set__2="_event: mouseleave; color: black"
                    raycaster="objects: [rayTarget]; "></a-cursor>
            </a-camera>

        </a-scene>
    </body>
</html>